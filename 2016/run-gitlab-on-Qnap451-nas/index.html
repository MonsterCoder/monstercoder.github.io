<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  
  <title>Run GitLab on QNAP NAS With Container | Awakening Byte</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
    <meta name="author" content="George Chen">
  
  
    <meta name="description" content="GitLab is a web-based Git repository manager with Git repository management, code reviews, issue tracking, wikis. It is very similar to GitHub but can be hosted on your own server. It will be awesome">
  
  <meta name="description" content="GitLab is a web-based Git repository manager with Git repository management, code reviews, issue tracking, wikis. It is very similar to GitHub but can be hosted on your own server. It will be awesome">
<meta property="og:type" content="article">
<meta property="og:title" content="Run GitLab on QNAP NAS With Container">
<meta property="og:url" content="http://monstercoder.github.io/2016/run-gitlab-on-Qnap451-nas/index.html">
<meta property="og:site_name" content="Awakening Byte">
<meta property="og:description" content="GitLab is a web-based Git repository manager with Git repository management, code reviews, issue tracking, wikis. It is very similar to GitHub but can be hosted on your own server. It will be awesome">
<meta property="og:image" content="http://monstercoder.github.io/images/AppCenter.jpg">
<meta property="og:image" content="http://monstercoder.github.io/images/ContainerStation.jpg">
<meta property="og:image" content="http://monstercoder.github.io/images/Create.jpg">
<meta property="og:image" content="http://monstercoder.github.io/images/settings.jpg">
<meta property="og:image" content="http://monstercoder.github.io/images/gitlab2.jpg">
<meta property="og:updated_time" content="2016-04-25T23:50:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Run GitLab on QNAP NAS With Container">
<meta name="twitter:description" content="GitLab is a web-based Git repository manager with Git repository management, code reviews, issue tracking, wikis. It is very similar to GitHub but can be hosted on your own server. It will be awesome">
<meta name="twitter:image" content="http://monstercoder.github.io/images/AppCenter.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Awakening Byte" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>

<body>
  <div class="wrapper">
    <header id="header">
  <div class="title">
    <h1><a href="/">Awakening Byte</a></h1>
    <p><a href="/">You cannot travel the path until you become the path itself</a></p>
  </div>
  <nav class="nav">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
      
        <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
  <div class="clearfix"></div>
</header>
    <div class="content"><article class="post">
  <header>
    
      <div class="icon"></div>
      <a href="/2016/run-gitlab-on-Qnap451-nas/">
  <time datetime="2016-04-13T00:53:41.000Z">
    2016-04-12
  </time>
</a>
    
    
  
    <h1 class="title">Run GitLab on QNAP NAS With Container</h1>
  

  </header>
  
  <div class="entry">
    
      <p>GitLab is a web-based Git repository manager with Git repository management, code reviews, issue tracking, wikis. It is very similar to GitHub but can be hosted on your own server. It will be awesome to have an on-permise git server for my private projects and personal documents. I can also use it to mirror remote repositories hosted on GitHub. Recently I bought a QNAP 451 NAS. It has a feature called Container Station, which integrates Linux Containers (LXC) and Docker virtualisation technologies. Container Station allows me to operate multiple isolated Linux® systems on a QNAP NAS. This makes this NAS a perfect host for my git server.</p>
<h2 id="Create-a-GitLab-container"><a href="#Create-a-GitLab-container" class="headerlink" title="Create a GitLab container"></a>Create a GitLab container</h2><p>First you need to have Container Station Installed. <a href="https://www.qnap.com/i/en/tutorial/con_show.php?op=showone&amp;cid=179" target="_blank" rel="external">Here</a> you can find detailed instructions on how to do that.</p>
<p><img src="/images/AppCenter.jpg" alt="App Store"></p>
<p>Then open Container Station, click <code>Create Container</code>, choose GitLib which happens to be the first one in list.</p>
<p><img src="/images/ContainerStation.jpg" alt="App Store"></p>
<p><img src="/images/Create.jpg" alt="App Store"></p>
<p>Docker images are pulled from the popular docker registry <a href="https://hub.docker.com/" target="_blank" rel="external">Dockerhub</a>. It is interesting to see that QNAP Container Station knows to launch the GitLib image with <a href="https://docs.docker.com/compose/" target="_blank" rel="external">docker-compose</a>. Which results in creating three containers. These three containers provide a complete GitLab service. </p>
<pre><code>gitlab1_gitlab_1
gitlab1_postgresql_1
gitlab1_redis_1
</code></pre><p>Each container can be individually configured from UI. </p>
<p><img src="/images/settings.jpg" alt="App Store"></p>
<p>Open a web brower and go to <a href="http://10.0.1.25:10080/" target="_blank" rel="external">http://10.0.1.25:10080/</a>, log in(default username / password: root / 5iveL! Fe) to start using GitLab.</p>
<p><img src="/images/gitlab2.jpg" alt="App Store"></p>
<p>I want to  checkout out what is running under the hood. Open a terminal and SSH into the NAS, list all the running containers.</p>
<pre><code>ssh root@10.0.1.25

[~] # docker ps
CONTAINER ID        IMAGE                         COMMAND                  CREATED             STATUS              PORTS                                                   NAMES
e0805483da90        sameersbn/gitlab:8.2.3        &quot;/sbin/entrypoint.sh &quot;   21 hours ago        Up 21 hours         443/tcp, 0.0.0.0:10022-&gt;22/tcp, 0.0.0.0:10080-&gt;80/tcp   gitlab1_gitlab_1
13491bc0d510        sameersbn/postgresql:9.4-11   &quot;/sbin/entrypoint.sh&quot;    21 hours ago        Up 21 hours         5432/tcp                                                gitlab1_postgresql_1
25217f65f54a        sameersbn/redis:latest        &quot;/sbin/entrypoint.sh&quot;    21 hours ago        Up 21 hours         6379/tcp                                                gitlab1_redis_1
</code></pre><p>Note except gitlab1_gitlab_1, other two don’t have ports map to the host. How does the gitlab1_gitlab_1 connect to them?<br>Lets take a close look at inspect gitlab1_gitlab_1</p>
<pre><code>docker inspect gitlab1_gitlab_1

...
    &quot;Links&quot;: [
        &quot;/gitlab1_postgresql_1:/gitlab1_gitlab_1/postgresql&quot;,
        &quot;/gitlab1_postgresql_1:/gitlab1_gitlab_1/postgresql_1&quot;,
        &quot;/gitlab1_redis_1:/gitlab1_gitlab_1/redis_1&quot;,
        &quot;/gitlab1_redis_1:/gitlab1_gitlab_1/redisio&quot;,
        &quot;/gitlab1_postgresql_1:/gitlab1_gitlab_1/gitlab1_postgresql_1&quot;,
        &quot;/gitlab1_redis_1:/gitlab1_gitlab_1/gitlab1_redis_1&quot;
    ],
...
</code></pre><p>Aha, here we go. Instead of network port mappings, it uses linking system to connect to postgressql and redis services. Very neat!</p>
<p><code>Network port mappings are not the only way Docker containers can connect to one another. Docker also has a linking system that allows you to link multiple containers together and send connection information from one to another. When containers are linked, information about a source container can be sent to a recipient container. This allows the recipient to see selected data describing aspects of the source container</code></p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Thanks for Container Station, setting up a GitLab server on QNAP NAS is a straight forward and joyful job. QNAP does an excellent job in integrating Docker virtualization with its QTS operating system. If you need more control, you still have full access to the Docker engine which QNAP Container Station built on top.</p>

    
  </div>
  <footer>
    
      
      
  <div class="tags">
    <a class="tags-link" href="/tags/Container/">Container</a>, <a class="tags-link" href="/tags/GitLab/">GitLab</a>
  </div>

    
    <div class="clearfix"></div>
  </footer>
</article>

</div>
  </div>
  <footer id="footer"><div class="copyright">
  
  &copy; 2016 <a href="/">George Chen</a>
  
</div>
<div class="theme-copyright">
  Theme by <a href="https://github.com/orderedlist" target="_blank">orderedlist</a>
   | 
  Redesign by <a href="http://heroicyang.com/" target="_blank">Heroic Yang</a>
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="/js/scale.fix.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  (function($){
    $('.fancybox').fancybox();
  })(jQuery);
</script>

</body>
</html>